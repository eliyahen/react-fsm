import{importShared as X}from"./__federation_fn_import-lsZw_Fsn.js";import{r as Z}from"./__federation_shared_react-DkVAVQOJ.js";var D={exports:{}},_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee=Z,te=Symbol.for("react.element"),ne=Symbol.for("react.fragment"),re=Object.prototype.hasOwnProperty,se=ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ie={key:!0,ref:!0,__self:!0,__source:!0};function K(t,e,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)re.call(e,r)&&!ie.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:te,type:t,key:o,ref:i,props:s,_owner:se.current}}_.Fragment=ne;_.jsx=K;_.jsxs=K;D.exports=_;var oe=D.exports,j={exports:{}},m=typeof Reflect=="object"?Reflect:null,F=m&&typeof m.apply=="function"?m.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},g;m&&typeof m.ownKeys=="function"?g=m.ownKeys:Object.getOwnPropertySymbols?g=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:g=function(e){return Object.getOwnPropertyNames(e)};function ue(t){console&&console.warn&&console.warn(t)}var W=Number.isNaN||function(e){return e!==e};function u(){u.init.call(this)}j.exports=u;j.exports.once=le;u.EventEmitter=u;u.prototype._events=void 0;u.prototype._eventsCount=0;u.prototype._maxListeners=void 0;var B=10;function b(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(t){if(typeof t!="number"||t<0||W(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");B=t}});u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};u.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||W(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function U(t){return t._maxListeners===void 0?u.defaultMaxListeners:t._maxListeners}u.prototype.getMaxListeners=function(){return U(this)};u.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",o=this._events;if(o!==void 0)s=s&&o.error===void 0;else if(!s)return!1;if(s){var i;if(n.length>0&&(i=n[0]),i instanceof Error)throw i;var d=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw d.context=i,d}var f=o[e];if(f===void 0)return!1;if(typeof f=="function")F(f,this,n);else for(var v=f.length,E=q(f,v),r=0;r<v;++r)F(E[r],this,n);return!0};function V(t,e,n,r){var s,o,i;if(b(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),i=o[e]),i===void 0)i=o[e]=n,++t._eventsCount;else if(typeof i=="function"?i=o[e]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),s=U(t),s>0&&i.length>s&&!i.warned){i.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=t,d.type=e,d.count=i.length,ue(d)}return t}u.prototype.addListener=function(e,n){return V(this,e,n,!1)};u.prototype.on=u.prototype.addListener;u.prototype.prependListener=function(e,n){return V(this,e,n,!0)};function ae(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function G(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=ae.bind(r);return s.listener=n,r.wrapFn=s,s}u.prototype.once=function(e,n){return b(n),this.on(e,G(this,e,n)),this};u.prototype.prependOnceListener=function(e,n){return b(n),this.prependListener(e,G(this,e,n)),this};u.prototype.removeListener=function(e,n){var r,s,o,i,d;if(b(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===n||r[i].listener===n){d=r[i].listener,o=i;break}if(o<0)return this;o===0?r.shift():fe(r,o),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,d||n)}return this};u.prototype.off=u.prototype.removeListener;u.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),i;for(s=0;s<o.length;++s)i=o[s],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function H(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?ce(s):q(s,s.length)}u.prototype.listeners=function(e){return H(this,e,!0)};u.prototype.rawListeners=function(e){return H(this,e,!1)};u.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):$.call(t,e)};u.prototype.listenerCount=$;function $(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]};function q(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function fe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ce(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function le(t,e){return new Promise(function(n,r){function s(i){t.removeListener(e,o),r(i)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}J(t,e,o,{once:!0}),e!=="error"&&de(t,s,{once:!0})})}function de(t,e,n){typeof t.on=="function"&&J(t,"error",e,n)}function J(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(o){r.once&&t.removeEventListener(e,s),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ve=j.exports;const a=await X("react"),{useContext:pe,useImperativeHandle:he}=a,C="transitionDone",k="triggerInvoke",me={state:"dummy",getPayload:()=>{},isBlocked:!1,getAllStates:()=>[],getAllTriggers:()=>[],getStateTriggers:()=>[],invokeStateTrigger:()=>()=>async()=>{},addTransitionDoneListener:()=>()=>{},addTriggerInvokeListener:()=>()=>{}},Y=a.createContext(me);function ge({children:t,initialState:e,initialStatePayload:n,statesTriggers:r,apiRef:s,onTransitionDone:o,onTriggerInvoke:i}){const f=a.useRef(r).current,[v,E]=a.useState(e),[w,z]=a.useState(n),[y,T]=a.useState(!1),c=a.useRef({curState:v,curPayload:w,isBlocked:y});c.current.curState=v,c.current.curPayload=w,c.current.isBlocked=y;const h=a.useRef(new ve.EventEmitter),P=a.useCallback(()=>c.current.curPayload,[]),L=a.useCallback(()=>Object.keys(f),[f]),O=a.useCallback(()=>Array.from(new Set(Object.keys(f).flatMap(l=>Object.keys(f[l])))),[f]),x=a.useCallback(l=>Object.keys(f[l]),[f]),N=a.useCallback((l,p)=>{E(l),z(p),o?.(v,l,w,p),h.current.emit(C,c.current.curState,l,c.current.curPayload,p)},[o]),A=a.useCallback(l=>p=>async(...S)=>{if(l===c.current.curState&&!c.current.isBlocked){const Q=f[c.current.curState][p];T(!0),i?.(c.current.curState,c.current.curPayload,p,...S),h.current.emit(k,c.current.curState,c.current.curPayload,p,...S),await Q({state:c.current.curState,payload:c.current.curPayload,isBlocked:c.current.isBlocked,transition:N,getAllStates:L})(...S),T(!1)}},[f,i,N,L,O,x]),M=a.useCallback(l=>(h.current.addListener(C,l),()=>{h.current.removeListener(C,l)}),[f]),I=a.useCallback(l=>(h.current.addListener(k,l),()=>{h.current.removeListener(k,l)}),[]),R=a.useMemo(()=>({state:v,getPayload:P,isBlocked:y,getAllStates:L,getAllTriggers:O,getStateTriggers:x,invokeStateTrigger:A,addTransitionDoneListener:M,addTriggerInvokeListener:I}),[v,P,y,L,O,x,A,M,I]);return he(s,()=>R,[R]),oe.jsx(Y.Provider,{value:R,children:t})}function _e(){return pe(Y)}export{ge as F,oe as j,_e as u};
